# sqlserver索引
## 1.基础概念
* ### [1.1 聚集索引](#11聚集索引-clustering-index)
* ### [1.2 非聚集索引](#12非聚集索引-nonclustering-index)
* ### [1.3 包含列索引](#1.3)
* ### [1.4 筛选索引](#1.4)
* ### [1.5 唯一索引](#1.5)

## 1. 基础概念

#### 索引
索引是一个单独的，存储在磁盘上的数据结构，它们包含则对数据表里所有记录的引用指针，使用索引用于快速找出在某个或多个列中有某一特定值的行，对相关列使用索引是降低查询操作时间的最佳途径。索引包含由表或视图中的一列或多列生成的键。

但索引所带来的性能好处是有代价的。首先，索引在数据库中会占用一定的存储空间来存储索引部分，其次，在对数据进行插入、更改、删除操作时，为了使索引和数据保持一致，还需要对索引进行相应维护。对索引的维护是需要花费时间的。

因此，利用索引提高查询效率是以空间和增加了数据更改的时间为代价的。在设计和创建索引时，应确保对性能的提高程度大于在存储空间和处理资源方面的代价。

### 1.1聚集索引 clustering index

  聚集索引对数据按索引关键字进行物理排序。

  在SQL Server中 聚集索引和非聚集索引都采用B-树结构来存储索引项，而且都包含数据页和索引页，其中索引页存在索引项和只想下一层的指针，数据页用来存放数据

  建立聚集索引后，数据将按聚集索引关键字的值进行物理排序
  
#### *考虑对具有下列特点的查询使用聚集索引：*

* 使用运算符：between and,>,<,>=,<=返回一个的范围值
* 使用大型结果集的查询
* 经常使用join子句进行连接操作
* 经常使用order by或group by子句
#### *考虑对具有下列特点的列建立聚集索引：*
* 唯一或包含许多不重复的列
* 被顺序访问的列
* order by或group by子句经常指定的列
* 经常被用具进行连接操作的列
#### *在具有下列特点的列上不适合建立聚集索引：*
* 频繁更改的列
* 宽键

### 1.2非聚集索引 nonclustering index
  非聚集索引不对数据进行物理排序
 
  非聚集索引可以建立在有聚集索引的表上，也可以建立在无任何索引的表上，在SQL Server中，非聚集索引中的行定位器有两种形式:

1.  如果该表中没有定义聚集索引，则行定位器就是指向行的指针。
2.  如果该表已建有聚集索引，则定位器就是改行的聚集索引关键字的值。

#### *考虑对具有下列特点的查询使用聚集索引：*

* 不返回大型结果集的查询
* 使用join或group by子句
* 包含大量非重复值的列
* 经常作为查询条件使用的列


